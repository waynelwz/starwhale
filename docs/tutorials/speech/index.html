<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-tutorials/speech">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.20">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=none"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","none",{anonymize_ip:!0})</script><title data-rh="true">Audio Classification on Speech Commands dataset | Starwhale</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://doc.starwhale.ai/docs/tutorials/speech"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Audio Classification on Speech Commands dataset | Starwhale"><meta data-rh="true" name="description" content="This example illustrates how to evaluate a pre-trained audio classification model on Starwhale(version:0.2.0b8) in 6 steps."><meta data-rh="true" property="og:description" content="This example illustrates how to evaluate a pre-trained audio classification model on Starwhale(version:0.2.0b8) in 6 steps."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://doc.starwhale.ai/docs/tutorials/speech"><link data-rh="true" rel="alternate" href="https://doc.starwhale.ai/docs/tutorials/speech" hreflang="en"><link data-rh="true" rel="alternate" href="https://doc.starwhale.ai/docs/tutorials/speech" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.6ee9b141.css">
<link rel="preload" href="/assets/js/runtime~main.ce36098f.js" as="script">
<link rel="preload" href="/assets/js/main.c6840791.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><div class="announcementBar_IbjG" role="banner"><div class="announcementBarPlaceholder_NC_W"></div><div class="announcementBarContent_KsVm">If you like <b>Starwhale</b>, <a target="_blank" rel="noopener noreferrer" href="https://github.com/star-whale/starwhale">give us a star on GitHub!</a> 🌺</div><button type="button" class="clean-btn close announcementBarClose_FG1z" aria-label="Close"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top navbarHideable_ObN2 navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/starwhale-white.png" alt="Starwhale" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/starwhale-white.png" alt="Starwhale" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title text--truncate"> </b></a><a class="navbar__item navbar__link" href="/docs/quickstart/standalone">Documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/star-whale/starwhale" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-ico header-ico--github" aria-label="GitHub repository">Github</a><a href="https://starwhale.slack.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-ico header-ico--slack" aria-label="Slack Channel">Slack</a><div class="searchBox_dLyj"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_mKqt"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><div class="docPage_ualW"><aside class="theme-doc-sidebar-container docSidebarContainer_UQUJ"><div class="sidebar_RiAD sidebarWithHideableNavbar_d0QC"><a tabindex="-1" class="sidebarLogo_YUvz" href="/"><img src="/img/starwhale-white.png" alt="Starwhale" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/starwhale-white.png" alt="Starwhale" class="themedImage_W2Cr themedImage--dark_oUvU"><b> </b></a><nav class="menu thin-scrollbar menu_izAj menuWithAnnouncementBar_l2a_"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/quickstart/standalone">Quickstart</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/tutorials/mnist">Tutorials</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/mnist">MNIST with Pytorch</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/ag_news">Text Classification on AG News dataset</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/cifar10">Image Classification on CIFAR-10</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/pfp">Object Detection &amp; segmentation on PeenFudanPed dataset</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/tutorials/speech">Audio Classification on Speech Commands dataset</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/nmt">NMT for french and engish</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/fundamentals/concepts">Fundamentals</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/standalone/overview">Standalone Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/cloud/helm-charts">Cloud Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/reference/cli/main">Reference</a></div></li></ul></nav></div></aside><main class="docMainContainer_uL0j"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_kU5B"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Tutorials</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Audio Classification on Speech Commands dataset</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_bZGK theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_l22C">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Audio Classification on Speech Commands dataset</h1></header><p>This example illustrates how to evaluate a pre-trained audio classification model on Starwhale(<code>version:0.2.0b8</code>) in 6 steps.</p><ol><li>Create a Runtime</li><li>Train the model</li><li>Implement the dataset slicing method</li><li>Implement the inference method and evaluation metrics computing method</li><li>Build Runtime, Model, and Dataset</li><li>Run the evaluation job and see the metrics</li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="prerequisites">Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">​</a></h2><ul><li>Assume that you have Python3.7 or above installed.</li><li>Clone starwhale repo</li></ul><div class="language-shell codeBlockContainer_MPoW theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-shell codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> clone https://github.com/star-whale/starwhale.git</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> starwhale/example/speech_command</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>💡 If you are from the mainland of China, we strongly recommend you use a proxy.</p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="create-a-runtime">Create a Runtime<a class="hash-link" href="#create-a-runtime" title="Direct link to heading">​</a></h2><div class="language-shell codeBlockContainer_MPoW theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-shell codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ swcli runtime create </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">.</span><span class="token plain"> --name audio_pytorch -m venv --python</span><span class="token operator">=</span><span class="token number">3.8</span><span class="token plain"> --force</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">🚧 start to create runtime environment</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">👏 create venv@~/code/starwhale/example/speech_command/venv, python:3.8.10 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">default, Mar </span><span class="token number">15</span><span class="token plain"> </span><span class="token number">2022</span><span class="token plain">, </span><span class="token number">12</span><span class="token plain">:22:08</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">GCC </span><span class="token number">9.4</span><span class="token plain">.0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">🐶 </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">starwhale</span><span class="token operator">==</span><span class="token number">0.2</span><span class="token plain">.0b8 venv@~/code/starwhale/example/speech_command/venv</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">🍰 run </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">command</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> shell 🍰</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        ~/code/starwhale/example/speech_command/venv/bin/activate</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">👏 python runtime environment is ready to use 🎉</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">source</span><span class="token plain"> ~/code/starwhale/example/speech_command/venv/bin/activate</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">audio_pytorch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> $  python3 -m pip </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> -r requirements.txt</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>💡 make sure python3.8-venv is installed if you choose --python=3.8
💡 <code>python3 -m pip install</code> is recommended over <code>pip install</code></p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="train-the-model">Train the model<a class="hash-link" href="#train-the-model" title="Direct link to heading">​</a></h2><blockquote><p>The training code in this repo is copied from <a href="https://pytorch.org/tutorials/intermediate/speech_command_classification_with_torchaudio_tutorial.html" target="_blank" rel="noopener noreferrer">torchaudio tutorial</a>. However, some code is modified to understand better how Starwhale works.</p></blockquote><div class="language-shell codeBlockContainer_MPoW theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-shell codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">audio_pytorch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> $ </span><span class="token function" style="color:rgb(80, 250, 123)">mkdir</span><span class="token plain"> models</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">audio_pytorch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> $ </span><span class="token function" style="color:rgb(80, 250, 123)">mkdir</span><span class="token plain"> data</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">audio_pytorch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> $ </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> code</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">audio_pytorch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> $ python train.py</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You will get the logs as below:</p><div class="language-shell codeBlockContainer_MPoW theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-shell codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token number">0</span><span class="token plain">%</span><span class="token operator">|</span><span class="token plain">                                                          </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain">/1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">00:0</span><span class="token operator file-descriptor important">0</span><span class="token operator">&lt;</span><span class="token plain">?, ?it/s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">Train Epoch: </span><span class="token number">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">0</span><span class="token plain">/84843 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0</span><span class="token plain">%</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">   Loss: </span><span class="token number">3.755602</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token number">5</span><span class="token plain">%</span><span class="token operator">|</span><span class="token plain">███▊                                                      </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">0.047846889952153096</span><span class="token plain">/1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">00:1</span><span class="token operator file-descriptor important">8</span><span class="token operator">&lt;</span><span class="token plain">06:13, </span><span class="token number">392</span><span class="token plain">.78s/it</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">Train Epoch: </span><span class="token number">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">5120</span><span class="token plain">/84843 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">6</span><span class="token plain">%</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">        Loss: </span><span class="token number">3.069063</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token number">10</span><span class="token plain">%</span><span class="token operator">|</span><span class="token plain">██████▋                                                   </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">0.09569377990430618</span><span class="token plain">/1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">00:3</span><span class="token operator file-descriptor important">6</span><span class="token operator">&lt;</span><span class="token plain">05:49, </span><span class="token number">386</span><span class="token plain">.05s/it</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">Train Epoch: </span><span class="token number">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">10240</span><span class="token plain">/84843 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">12</span><span class="token plain">%</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">      Loss: </span><span class="token number">2.678599</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token number">14</span><span class="token plain">%</span><span class="token operator">|</span><span class="token plain">████████▍                                                 </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">0.14354066985645936</span><span class="token plain">/1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">00:5</span><span class="token operator file-descriptor important">3</span><span class="token operator">&lt;</span><span class="token plain">04:53, </span><span class="token number">342</span><span class="token plain">.60s/it</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">Train Epoch: </span><span class="token number">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">15360</span><span class="token plain">/84843 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">18</span><span class="token plain">%</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">      Loss: </span><span class="token number">2.131145</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token number">19</span><span class="token plain">%</span><span class="token operator">|</span><span class="token plain">███████████▎                                              </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">0.19138755980861272</span><span class="token plain">/1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">01:1</span><span class="token operator file-descriptor important">0</span><span class="token operator">&lt;</span><span class="token plain">04:33, </span><span class="token number">338</span><span class="token plain">.02s/it</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">Train Epoch: </span><span class="token number">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">20480</span><span class="token plain">/84843 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">24</span><span class="token plain">%</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">      Loss: </span><span class="token number">2.012789</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token number">24</span><span class="token plain">%</span><span class="token operator">|</span><span class="token plain">██████████████                                            </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">0.23923444976076608</span><span class="token plain">/1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">01:2</span><span class="token operator file-descriptor important">7</span><span class="token operator">&lt;</span><span class="token plain">05:03, </span><span class="token number">398</span><span class="token plain">.31s/it</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">Train Epoch: </span><span class="token number">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">25600</span><span class="token plain">/84843 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">30</span><span class="token plain">%</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">      Loss: </span><span class="token number">1.740537</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token number">29</span><span class="token plain">%</span><span class="token operator">|</span><span class="token plain">████████████████▉                                         </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">0.28708133971291944</span><span class="token plain">/1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">01:4</span><span class="token operator file-descriptor important">4</span><span class="token operator">&lt;</span><span class="token plain">04:34, </span><span class="token number">385</span><span class="token plain">.32s/it</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">Train Epoch: </span><span class="token number">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">30720</span><span class="token plain">/84843 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">36</span><span class="token plain">%</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">      Loss: </span><span class="token number">1.725273</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token number">33</span><span class="token plain">%</span><span class="token operator">|</span><span class="token plain">███████████████████                                       </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">0.3349282296650728</span><span class="token plain">/1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">02:0</span><span class="token operator file-descriptor important">2</span><span class="token operator">&lt;</span><span class="token plain">04:06, </span><span class="token number">371</span><span class="token plain">.29s/it</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">Train Epoch: </span><span class="token number">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">35840</span><span class="token plain">/84843 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">42</span><span class="token plain">%</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">      Loss: </span><span class="token number">1.671064</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token number">38</span><span class="token plain">%</span><span class="token operator">|</span><span class="token plain">██████████████████████▌                                   </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">0.38277511961722616</span><span class="token plain">/1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">02:1</span><span class="token operator file-descriptor important">9</span><span class="token operator">&lt;</span><span class="token plain">03:43, </span><span class="token number">362</span><span class="token plain">.65s/it</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">Train Epoch: </span><span class="token number">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">40960</span><span class="token plain">/84843 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">48</span><span class="token plain">%</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">      Loss: </span><span class="token number">1.381939</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token number">43</span><span class="token plain">%</span><span class="token operator">|</span><span class="token plain">█████████████████████████▊                                </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">0.4306220095693795</span><span class="token plain">/1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">02:3</span><span class="token operator file-descriptor important">6</span><span class="token operator">&lt;</span><span class="token plain">03:15, </span><span class="token number">342</span><span class="token plain">.59s/it</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">Train Epoch: </span><span class="token number">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">46080</span><span class="token plain">/84843 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">54</span><span class="token plain">%</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">      Loss: </span><span class="token number">1.435907</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token number">48</span><span class="token plain">%</span><span class="token operator">|</span><span class="token plain">███████████████████████████▌                              </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">0.4784688995215329</span><span class="token plain">/1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">02:5</span><span class="token operator file-descriptor important">5</span><span class="token operator">&lt;</span><span class="token plain">03:25, </span><span class="token number">393</span><span class="token plain">.13s/it</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">Train Epoch: </span><span class="token number">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">51200</span><span class="token plain">/84843 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">60</span><span class="token plain">%</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">      Loss: </span><span class="token number">1.576231</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token number">53</span><span class="token plain">%</span><span class="token operator">|</span><span class="token plain">██████████████████████████████▍                           </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">0.5263157894736856</span><span class="token plain">/1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">03:1</span><span class="token operator file-descriptor important">3</span><span class="token operator">&lt;</span><span class="token plain">02:38, </span><span class="token number">335</span><span class="token plain">.18s/it</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">Train Epoch: </span><span class="token number">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">56320</span><span class="token plain">/84843 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">66</span><span class="token plain">%</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">      Loss: </span><span class="token number">1.206882</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token number">57</span><span class="token plain">%</span><span class="token operator">|</span><span class="token plain">█████████████████████████████████▎                        </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">0.5741626794258379</span><span class="token plain">/1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">03:2</span><span class="token operator file-descriptor important">9</span><span class="token operator">&lt;</span><span class="token plain">02:32, </span><span class="token number">357</span><span class="token plain">.79s/it</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">Train Epoch: </span><span class="token number">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">61440</span><span class="token plain">/84843 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">72</span><span class="token plain">%</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">      Loss: </span><span class="token number">1.126174</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token number">62</span><span class="token plain">%</span><span class="token operator">|</span><span class="token plain">████████████████████████████████████▏                     </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">0.6220095693779901</span><span class="token plain">/1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">03:4</span><span class="token operator file-descriptor important">6</span><span class="token operator">&lt;</span><span class="token plain">02:05, </span><span class="token number">331</span><span class="token plain">.93s/it</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">Train Epoch: </span><span class="token number">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">66560</span><span class="token plain">/84843 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">78</span><span class="token plain">%</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">      Loss: </span><span class="token number">1.345579</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token number">67</span><span class="token plain">%</span><span class="token operator">|</span><span class="token plain">██████████████████████████████████████                    </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">0.6698564593301424</span><span class="token plain">/1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">04:0</span><span class="token operator file-descriptor important">2</span><span class="token operator">&lt;</span><span class="token plain">01:48, </span><span class="token number">328</span><span class="token plain">.73s/it</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">Train Epoch: </span><span class="token number">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">71680</span><span class="token plain">/84843 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">84</span><span class="token plain">%</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">      Loss: </span><span class="token number">1.211446</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token number">72</span><span class="token plain">%</span><span class="token operator">|</span><span class="token plain">█████████████████████████████████████████▉                </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">0.7177033492822946</span><span class="token plain">/1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">04:1</span><span class="token operator file-descriptor important">8</span><span class="token operator">&lt;</span><span class="token plain">01:33, </span><span class="token number">330</span><span class="token plain">.40s/it</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">Train Epoch: </span><span class="token number">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">76800</span><span class="token plain">/84843 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">90</span><span class="token plain">%</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">      Loss: </span><span class="token number">1.104123</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token number">77</span><span class="token plain">%</span><span class="token operator">|</span><span class="token plain">████████████████████████████████████████████▊             </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">0.7655502392344469</span><span class="token plain">/1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">04:3</span><span class="token operator file-descriptor important">4</span><span class="token operator">&lt;</span><span class="token plain">01:20, </span><span class="token number">344</span><span class="token plain">.70s/it</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">Train Epoch: </span><span class="token number">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">81920</span><span class="token plain">/84843 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">96</span><span class="token plain">%</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">      Loss: </span><span class="token number">1.253487</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">100</span><span class="token plain">%</span><span class="token operator">|</span><span class="token plain">█████████████████████████████████████████████████████████▉</span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">0.9999999999999929</span><span class="token plain">/1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">05:5</span><span class="token operator file-descriptor important">3</span><span class="token operator">&lt;</span><span class="token plain">00:00, </span><span class="token number">353</span><span class="token plain">.79s/it</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Test Epoch: </span><span class="token number">1</span><span class="token plain">   Accuracy: </span><span class="token number">12200</span><span class="token plain">/22010 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">55</span><span class="token plain">%</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">100</span><span class="token plain">%</span><span class="token operator">|</span><span class="token plain">█████████████████████████████████████████████████████████▉</span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">0.9999999999999929</span><span class="token plain">/1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">05:5</span><span class="token operator file-descriptor important">3</span><span class="token operator">&lt;</span><span class="token plain">00:00, </span><span class="token number">353</span><span class="token plain">.91s/it</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Great! Now, you have your model trained and saved. You can see it in the <code>models</code> directory.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="slice-the-test-dataset-using-the-starwhale-protocol">Slice the test dataset using the Starwhale protocol<a class="hash-link" href="#slice-the-test-dataset-using-the-starwhale-protocol" title="Direct link to heading">​</a></h2><p>In the training section, we use a dataset called <a href="https://paperswithcode.com/dataset/speech-commands" target="_blank" rel="noopener noreferrer">SpeechCommands</a>.</p><div class="language-shell codeBlockContainer_MPoW theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-shell codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">audio_pytorch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> $ </span><span class="token function" style="color:rgb(80, 250, 123)">ls</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">/data</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">SpeechCommands  speech_commands_v0.02.tar.gz</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Before version <code>0.2.x</code>, Starwhale sliced the dataset into chunks where the batched audios and labels reside. You must tell Starwhale how to yield batches of byte arrays from each dataset file.</p><p>To read all test files in this dataset, we overwrite <code>load_list</code> method of the parent class <code>BuildExecutor</code> in Starwhale SDK.
To package audios and labels in batches and convert them into byte arrays, we overwrite <code>iter_all_dataset_slice</code> and <code>iter_all_label_slice</code> methods of the parent class <code>BuildExecutor</code> in Starwhale SDK. We package paths of audios into <code>FileBytes</code> so that it is easier to debug.</p><div class="language-python codeBlockContainer_MPoW theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-python codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">FileBytes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">__init__</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> p</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">file_path </span><span class="token operator">=</span><span class="token plain"> p</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">content_bytes </span><span class="token operator">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">open</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">p</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;rb&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">read</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">_pickle_data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">audio_file_paths</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    all_bytes </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">FileBytes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">audio_f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> audio_f </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> audio_file_paths</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> pickle</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">dumps</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">all_bytes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">_pickle_label</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">audio_file_paths</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    all_strings </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">os</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">basename</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">os</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">dirname</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token builtin" style="color:rgb(189, 147, 249)">str</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">audio_f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> audio_f</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                   </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> audio_file_paths</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> pickle</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">dumps</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">all_strings</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">SpeechCommandsSlicer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">BuildExecutor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">load_list</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> file_filter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        filepath </span><span class="token operator">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">data_dir </span><span class="token operator">/</span><span class="token plain"> file_filter</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">with</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">open</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">filepath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> fileobj</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">data_dir </span><span class="token operator">/</span><span class="token plain"> line</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">strip</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> line </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> fileobj</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">_iter_files</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> file_filter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">str</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> sort_key</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> t</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Optional</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">t</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Any</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token boolean">None</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain"> t</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Generator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">Path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token boolean">None</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token boolean">None</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        _key </span><span class="token operator">=</span><span class="token plain"> sort_key</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> _key </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">is</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">not</span><span class="token plain"> </span><span class="token boolean">None</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">and</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">not</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">callable</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">_key</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">raise</span><span class="token plain"> Exception</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string-interpolation string" style="color:rgb(255, 121, 198)">f&quot;data_sort_func(</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string-interpolation interpolation">_key</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token string-interpolation string" style="color:rgb(255, 121, 198)">) is not callable.&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        _files </span><span class="token operator">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">sorted</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">load_list</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">file_filter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> key</span><span class="token operator">=</span><span class="token plain">_key</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> p </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> _files</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">not</span><span class="token plain"> p</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">is_file</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">continue</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">yield</span><span class="token plain"> p</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">iter_data_slice</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">str</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">pass</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">iter_label_slice</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">str</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">pass</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">iter_all_dataset_slice</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain"> t</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Generator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">t</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Any</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token boolean">None</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token boolean">None</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        datafiles </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">p </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> p </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">iter_data_files</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        idx </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        data_size </span><span class="token operator">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">len</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">datafiles</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">while</span><span class="token plain"> </span><span class="token boolean">True</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            last_idx </span><span class="token operator">=</span><span class="token plain"> idx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            idx </span><span class="token operator">=</span><span class="token plain"> idx </span><span class="token operator">+</span><span class="token plain"> self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">_batch</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> idx </span><span class="token operator">&gt;</span><span class="token plain"> data_size</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">break</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">yield</span><span class="token plain"> _pickle_data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">datafiles</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">last_idx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">idx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">iter_all_label_slice</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain"> t</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Generator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">t</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Any</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token boolean">None</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token boolean">None</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        datafiles </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">p </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> p </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">iter_data_files</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        idx </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        data_size </span><span class="token operator">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">len</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">datafiles</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">while</span><span class="token plain"> </span><span class="token boolean">True</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            last_idx </span><span class="token operator">=</span><span class="token plain"> idx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            idx </span><span class="token operator">=</span><span class="token plain"> idx </span><span class="token operator">+</span><span class="token plain"> self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">_batch</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> idx </span><span class="token operator">&gt;</span><span class="token plain"> data_size</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">break</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">yield</span><span class="token plain"> _pickle_label</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">datafiles</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">last_idx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">idx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You need to extend the abstract class <code>BuildExecutor</code>, so Starwhale can use it.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="implement-the-inference-method-and-evaluation-metrics-computing-method">Implement the inference method and evaluation metrics computing method<a class="hash-link" href="#implement-the-inference-method-and-evaluation-metrics-computing-method" title="Direct link to heading">​</a></h2><p>The inference method is called <code>ppl</code>, and the evaluation metrics computing method is called <code>cmp</code>.
Here is the code snap from <code>ppl.py</code>, which implements both methods. You need to extend the abstract class <code>PipelineHandler</code> so you can receive the byte arrays, which you transformed in the last step.</p><div class="language-python codeBlockContainer_MPoW theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-python codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">M5Inference</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">PipelineHandler</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">__init__</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> device</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;cpu&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token boolean">None</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token builtin" style="color:rgb(189, 147, 249)">super</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">__init__</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">merge_label</span><span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> ignore_error</span><span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">device </span><span class="token operator">=</span><span class="token plain"> torch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">device</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">device</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">model </span><span class="token operator">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">_load_model</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">device</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">transform </span><span class="token operator">=</span><span class="token plain"> torchaudio</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">transforms</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Resample</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">orig_freq</span><span class="token operator">=</span><span class="token number">16000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                        new_freq</span><span class="token operator">=</span><span class="token number">8000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">transform </span><span class="token operator">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">to</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">device</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">ppl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> batch_size</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">**</span><span class="token plain">kw</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        audios </span><span class="token operator">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">_pre</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> batch_size</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        result </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> audio_f </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> audios</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">try</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                label_idx </span><span class="token operator">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">model</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">audio_f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">unsqueeze</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">argmax</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    dim</span><span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">squeeze</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                result</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">append</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">label_idx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">except</span><span class="token plain"> Exception</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                result</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">append</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;ERROR&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> result</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token boolean">None</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">handle_label</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> label</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> batch_size</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">**</span><span class="token plain">kw</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> pickle</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">loads</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">label</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token decorator annotation punctuation" style="color:rgb(248, 248, 242)">@multi_classification</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        confusion_matrix_normalize</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;all&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        show_hamming_loss</span><span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        show_cohen_kappa_score</span><span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        show_roc_auc</span><span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        all_labels</span><span class="token operator">=</span><span class="token plain">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">cmp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> _data_loader</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        _result</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> _label</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> _pr </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> _data </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> _data_loader</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            _label</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">extend</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">_data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;label&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            _result</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">extend</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">_data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;result&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token comment" style="color:rgb(98, 114, 164)"># _pr.extend(_data[&quot;pr&quot;])</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> _result</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> _label</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">_pre</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">input</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">bytes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> batch_size</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">int</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        audios </span><span class="token operator">=</span><span class="token plain"> pickle</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">loads</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token builtin" style="color:rgb(189, 147, 249)">input</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        _result </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> file_bytes </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> audios</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token comment" style="color:rgb(98, 114, 164)"># you could debug the file name by watching file_bytes.file_path</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            bytes_io </span><span class="token operator">=</span><span class="token plain"> io</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">BytesIO</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">file_bytes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">content_bytes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            test_tensor </span><span class="token operator">=</span><span class="token plain"> torchaudio</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">load</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">bytes_io</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">to</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">device</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            test_tensor </span><span class="token operator">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">test_tensor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            _result</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">append</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">test_tensor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">to</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">device</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> _result</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">_post</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">input</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        pred_value </span><span class="token operator">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">input</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">argmax</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">flatten</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">tolist</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        probability_matrix </span><span class="token operator">=</span><span class="token plain"> np</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">exp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token builtin" style="color:rgb(189, 147, 249)">input</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">tolist</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">tolist</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> pred_value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> probability_matrix</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">_load_model</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> device</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        model </span><span class="token operator">=</span><span class="token plain"> M5</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">n_input</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> n_output</span><span class="token operator">=</span><span class="token number">35</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        model</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">load_state_dict</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">torch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">load</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token builtin" style="color:rgb(189, 147, 249)">str</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ROOTDIR </span><span class="token operator">/</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;models/m5.pth&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        model</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">to</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">device</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        model</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token builtin" style="color:rgb(189, 147, 249)">eval</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">print</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;m5 model loaded, start to inference...&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> model</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="implement-ppl">Implement ppl<a class="hash-link" href="#implement-ppl" title="Direct link to heading">​</a></h3><p>Starwhale will feed the byte arrays of one batch to the <code>ppl</code> method and put  the output of <code>ppl</code> into an <code>inference_result</code> dict, which looks like</p><div class="language-json codeBlockContainer_MPoW theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-json codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token property">&quot;result&quot;</span><span class="token operator">:</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">resultObj1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">resultObj2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token property">&quot;label&quot;</span><span class="token operator">:</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">labelObj1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">labelObj2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Starwhale will automatically add the result of <code>ppl</code> to <code>inference_result.result</code> and the result of <code>handle_label</code> to <code>inference_result.label</code>.</p><p>The <code>inference_result</code> is used in the argument of <code>cmp</code> named <code>_data_loader</code>.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="implement-cmp">Implement cmp<a class="hash-link" href="#implement-cmp" title="Direct link to heading">​</a></h3><p><code>_data_loader</code> is an iterator for <code>result</code> and <code>label</code>. For a multiple classification problem, it is pretty easy to implement the <code>cmp</code> method by annotating your <code>cmp</code> method with the <code>multi_classification</code> annotation and coping the lines inside it.</p><p>If you need to show <code>roc</code> and <code>auc</code>, you will also need to supply <code>_pr</code> in your <code>ppl</code> method. By now, we have finished all the coding parts. Then let&#x27;s begin the command line part.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="build-runtime-model-and-dataset">Build Runtime, Model, and Dataset<a class="hash-link" href="#build-runtime-model-and-dataset" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="build-runtime">Build Runtime<a class="hash-link" href="#build-runtime" title="Direct link to heading">​</a></h3><div class="language-shell codeBlockContainer_MPoW theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-shell codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">audio_pytorch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> $ </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">audio_pytorch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> $ swcli runtime build </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">🚧 start to build runtime bundle</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">👷 uri:local/project/self/runtime/audio_pytorch</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">🐦 runtime will ignore pypi editable package</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">🆕 version ga2wkmbwmizw</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">📁 workdir: /home/anda/.cache/starwhale/self/workdir/runtime/audio_pytorch/ga/ga2wkmbwmizwkn3bmuytsmjunv3dc3q</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">💫 python3.8.10@venv, os</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">Linux</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">, include-editable</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">False</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">, try to </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> environment</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">🌈 runtime </span><span class="token function" style="color:rgb(80, 250, 123)">docker</span><span class="token plain"> image: ghcr.io/star-whale/starwhale:0.2.0b8  🌈</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">🦋 .swrt bundle:/home/anda/.cache/starwhale/self/runtime/audio_pytorch/ga/ga2wkmbwmizwkn3bmuytsmjunv3dc3q.swrt</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token number">7</span><span class="token plain"> out of </span><span class="token number">7</span><span class="token plain"> steps finished ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ </span><span class="token number">100</span><span class="token plain">% </span><span class="token number">0</span><span class="token plain">:00:00 </span><span class="token number">0</span><span class="token plain">:00:02</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="build-dataset">Build Dataset<a class="hash-link" href="#build-dataset" title="Direct link to heading">​</a></h3><p>Here is some descriptive information needed for Starwhale to build a Starwhale Dataset(SWDS). A yaml file describes the information as below:</p><div class="language-yaml codeBlockContainer_MPoW theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-yaml codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> SpeechCommands</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">mode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> generate</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">data_dir</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> data/SpeechCommands/speech_commands_v0.02</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">data_filter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;testing_list.txt&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">label_filter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;testing_list.txt&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">process</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> code.data_slicer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">SpeechCommandsSlicer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">desc</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> SpeechCommands data and label test dataset</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">tag</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> bin</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">attr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">batch_size</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">  </span><span class="token number">256</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">alignment_size</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 4k</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">volume_size</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 64M</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Most of the fields are self-explained. The <code>process</code> descriptor is the entry point of the data split method, and Starwhale will use the files in <code>testing_list.txt</code> as the input for <code>process</code>.</p><p>After creating the yaml file under <code>${code_base}/example/speech_command/</code>, we are ready.</p><div class="language-shell codeBlockContainer_MPoW theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-shell codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">audio_pytorch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> $ swcli dataset build </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">🚧 start to build dataset bundle</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">👷 uri:local/project/self/dataset/speechcommands</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">🆕 version gmzgczrqmezd</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">📁 swds workdir: /home/anda/.cache/starwhale/self/dataset/speechcommands/gm/gmzgczrqmezdmmtdmq2dezbtmjqtimq.swds</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">👍 try to copy </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">source</span><span class="token plain"> code files</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">🗣  swcli python prefix:/usr, runtime </span><span class="token function" style="color:rgb(80, 250, 123)">env</span><span class="token plain"> python prefix:/mnt/c/Users/renyanda/Documents/code/starwhale/example/speech_command/venv, swcli will inject sys.path</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">👻 </span><span class="token function" style="color:rgb(80, 250, 123)">import</span><span class="token plain"> code.data_slicer:SpeechCommandsSlicer@/mnt/c/Users/renyanda/Documents/code/starwhale/example/speech_command to </span><span class="token function" style="color:rgb(80, 250, 123)">make</span><span class="token plain"> swds</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cleanup done.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">finish gen swds @ /home/anda/.cache/starwhale/self/dataset/speechcommands/gm/gmzgczrqmezdmmtdmq2dezbtmjqtimq.swds/data</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">🤖 calculate signature</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">🌺 congratulation</span><span class="token operator">!</span><span class="token plain"> you can run  swcli dataset info speechcommands/version/gmzgczrqmezdmmtdmq2dezbtmjqtimq</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token number">8</span><span class="token plain"> out of </span><span class="token number">8</span><span class="token plain"> steps finished ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ </span><span class="token number">100</span><span class="token plain">% </span><span class="token number">0</span><span class="token plain">:00:00 </span><span class="token number">0</span><span class="token plain">:01:54</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>There is one more step left.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="build-model">Build Model<a class="hash-link" href="#build-model" title="Direct link to heading">​</a></h3><p>Here is some descriptive information for Starwhale to build a Starwhale Model Package(SWMP). A yaml file describes the information as below:</p><div class="language-yaml codeBlockContainer_MPoW theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-yaml codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">version</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">1.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> m5</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">model</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> models/m5.pth</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">run</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">ppl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> code.ppl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">M5Inference</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">desc</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> m5 by pytorch</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">tag</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> speech command classification</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Most of the fields are self-explained. The <code>ppl</code> descriptor is the entry point of the inference and cmp method.
After creating the yaml file under <code>${code_base}/example/speech_command/</code>, we are ready.</p><div class="language-shell codeBlockContainer_MPoW theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-shell codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">audio_pytorch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> $ swcli model build </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">🚧 start to build model bundle</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">👷 uri:local/project/self/model/m5</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">🆕 version mfstoolehayd</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">📁 workdir: /home/anda/.cache/starwhale/self/workdir/model/m5/mf/mfstoolehaydeyrvmyzdamzrmzshuma</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">👍 try to copy </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">source</span><span class="token plain"> code files</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">🦋 .swmp bundle:/home/anda/.cache/starwhale/self/model/m5/mf/mfstoolehaydeyrvmyzdamzrmzshuma.swmp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token number">6</span><span class="token plain"> out of </span><span class="token number">6</span><span class="token plain"> steps finished ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ </span><span class="token number">100</span><span class="token plain">% </span><span class="token number">0</span><span class="token plain">:00:00 </span><span class="token number">0</span><span class="token plain">:00:17</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here we are. We have finished all the complex parts.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="run-the-evaluation-job-and-see-the-metrics">Run the evaluation job and see the metrics<a class="hash-link" href="#run-the-evaluation-job-and-see-the-metrics" title="Direct link to heading">​</a></h2><p>We have two ways to evaluate our model.</p><ul><li>Evaluate the model on the local standalone instance</li><li>Evaluate the model on a cloud instance</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="evaluate-the-model-on-the-local-standalone-instance">Evaluate the model on the local standalone instance<a class="hash-link" href="#evaluate-the-model-on-the-local-standalone-instance" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="create-a-job">Create a job<a class="hash-link" href="#create-a-job" title="Direct link to heading">​</a></h4><div class="language-shell codeBlockContainer_MPoW theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-shell codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ swcli job create self --model m5/version/latest --dataset speechcommands/version/latest --runtime audio_pytorch/version/latest</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">😹 /home/anda/.cache/starwhale/self/workdir/model/m5/mf/mfstoolehaydeyrvmyzdamzrmzshuma existed, skip extract model bundle</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">👏 render swds speechcommands:gmzgczrqmezdmmtdmq2dezbtmjqtimq local_fuse.json</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">🔍 /home/anda/.cache/starwhale/self/dataset/speechcommands/gm/gmzgczrqmezdmmtdmq2dezbtmjqtimq.swds/local_fuse.json</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">try to </span><span class="token function" style="color:rgb(80, 250, 123)">import</span><span class="token plain"> code.ppl:M5Inference@/home/anda/.cache/starwhale/self/workdir/model/m5/mf/mfstoolehaydeyrvmyzdamzrmzshuma/src</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">🗣  swcli python prefix:/usr, runtime </span><span class="token function" style="color:rgb(80, 250, 123)">env</span><span class="token plain"> python prefix:/mnt/c/Users/renyanda/Documents/code/starwhale/example/speech_command/venv, swcli will inject sys.path</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">m5 model loaded, start to inference</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">👏 finish run ppl: PipelineHandler status@/home/anda/.cache/starwhale/self/job/gu/gu2doojqmi2tmzrtgzqwinlfgq2wy3q/ppl/status, log@/home/anda/.cache/starwhale/self/job/gu/gu2doojqmi2tmzrtgzqwinlfgq2wy3q/ppl/log, result@/home/anda/.cache/starwhale/self/job/gu/gu2doojqmi2tmzrtgzqwinlfgq2wy3q/ppl/result</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">try to </span><span class="token function" style="color:rgb(80, 250, 123)">import</span><span class="token plain"> code.ppl:M5Inference@/home/anda/.cache/starwhale/self/workdir/model/m5/mf/mfstoolehaydeyrvmyzdamzrmzshuma/src</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">🗣  swcli python prefix:/usr, runtime </span><span class="token function" style="color:rgb(80, 250, 123)">env</span><span class="token plain"> python prefix:/mnt/c/Users/renyanda/Documents/code/starwhale/example/speech_command/venv, swcli will inject sys.path</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">m5 model loaded, start to inference</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/mnt/c/Users/renyanda/Documents/code/starwhale/example/speech_command/venv/lib/python3.8/site-packages/sklearn/metrics/_classification.py:1327: UndefinedMetricWarning: Precision and F-score are ill-defined and being </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">set</span><span class="token plain"> to </span><span class="token number">0.0</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> labels with no predicted samples. Use </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">`</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">zero_division</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">`</span><span class="token plain"> parameter to control this behavior.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  _warn_prf</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">average, modifier, msg_start, len</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(248, 248, 242)">))</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/mnt/c/Users/renyanda/Documents/code/starwhale/example/speech_command/venv/lib/python3.8/site-packages/sklearn/metrics/_classification.py:1327: UndefinedMetricWarning: Precision and F-score are ill-defined and being </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">set</span><span class="token plain"> to </span><span class="token number">0.0</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> labels with no predicted samples. Use </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">`</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">zero_division</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">`</span><span class="token plain"> parameter to control this behavior.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  _warn_prf</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">average, modifier, msg_start, len</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(248, 248, 242)">))</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/mnt/c/Users/renyanda/Documents/code/starwhale/example/speech_command/venv/lib/python3.8/site-packages/sklearn/metrics/_classification.py:1327: UndefinedMetricWarning: Precision and F-score are ill-defined and being </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">set</span><span class="token plain"> to </span><span class="token number">0.0</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> labels with no predicted samples. Use </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">`</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">zero_division</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">`</span><span class="token plain"> parameter to control this behavior.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  _warn_prf</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">average, modifier, msg_start, len</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(248, 248, 242)">))</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">👏 finish run cmp: PipelineHandler status@/home/anda/.cache/starwhale/self/job/gu/gu2doojqmi2tmzrtgzqwinlfgq2wy3q/cmp/status, log@/home/anda/.cache/starwhale/self/job/gu/gu2doojqmi2tmzrtgzqwinlfgq2wy3q/cmp/log, result@/home/anda/.cache/starwhale/self/job/gu/gu2doojqmi2tmzrtgzqwinlfgq2wy3q/cmp/result</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token number">7</span><span class="token plain"> out of </span><span class="token number">7</span><span class="token plain"> steps finished ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ </span><span class="token number">100</span><span class="token plain">% </span><span class="token number">0</span><span class="token plain">:00:00 </span><span class="token number">0</span><span class="token plain">:00:37</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">👏 success to create job</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">project id: local/project/self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">🐦 run cmd to fetch job info: swcli job info gu2doojqmi2t</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="see-the-metrics">See the metrics<a class="hash-link" href="#see-the-metrics" title="Direct link to heading">​</a></h4><div class="language-shell codeBlockContainer_MPoW theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-shell codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">audio_pytorch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> $ swcli job info gu2doojqmi2t</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">╭─ Starwhale Instance ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│                                                     ⭐ </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">local</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">local</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> 🐳                                                     🤡anda@normal │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">╰───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">──────────────────────────────────── Inspect _manifest.yaml </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> eval:local/project/self/job/gu2doojqmi2t ────────────────────────────────────</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;created_at&#x27;</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;2022-06-21 18:53:05 CST&#x27;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;datasets&#x27;</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;local/project/self/dataset/speechcommands/version/latest&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;desc&#x27;</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> None,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;finished_at&#x27;</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;2022-06-21 18:53:43 CST&#x27;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;model&#x27;</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;m5/version/latest&#x27;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;model_dir&#x27;</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;/home/anda/.cache/starwhale/self/workdir/model/m5/mf/mfstoolehaydeyrvmyzdamzrmzshuma/src&#x27;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;name&#x27;</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> None,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;phase&#x27;</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;all&#x27;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;runtime&#x27;</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;audio_pytorch/version/latest&#x27;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;status&#x27;</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;success&#x27;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;version&#x27;</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;gu2doojqmi2tmzrtgzqwinlfgq2wy3q&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">────────────────────────────────────────────────────────── Evaluation process </span><span class="token function" style="color:rgb(80, 250, 123)">dirs</span><span class="token plain"> ──────────────────────────────────────────────────────────</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">🌵 ppl: /home/anda/.cache/starwhale/self/job/gu/gu2doojqmi2tmzrtgzqwinlfgq2wy3q/ppl</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">🐫 cmp: /home/anda/.cache/starwhale/self/job/gu/gu2doojqmi2tmzrtgzqwinlfgq2wy3q/cmp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">──────────────────────────────────────────────────────── MULTI_CLASSIFICATION Report ────────────────────────────────────────────────────────</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Summary</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── accuracy: </span><span class="token number">0.5372</span><span class="token plain">                                Label      Precision   Recall   F1-score   Support</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── macro avg                                      ──────────────────────────────────────────────────────</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   ├── precision: </span><span class="token number">0.5152</span><span class="token plain">                           backward   </span><span class="token number">0.5394</span><span class="token plain">      </span><span class="token number">0.9368</span><span class="token plain">   </span><span class="token number">0.6846</span><span class="token plain">     </span><span class="token number">190.0000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   ├── recall: </span><span class="token number">0.6146</span><span class="token plain">                              bed        </span><span class="token number">0.2995</span><span class="token plain">      </span><span class="token number">0.4559</span><span class="token plain">   </span><span class="token number">0.3615</span><span class="token plain">     </span><span class="token number">272.0000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   ├── f1-score: </span><span class="token number">0.5241</span><span class="token plain">                            bird       </span><span class="token number">0.3622</span><span class="token plain">      </span><span class="token number">0.4085</span><span class="token plain">   </span><span class="token number">0.3840</span><span class="token plain">     </span><span class="token number">328.0000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   └── support: </span><span class="token number">21760.0000</span><span class="token plain">                         </span><span class="token function" style="color:rgb(80, 250, 123)">cat</span><span class="token plain">        </span><span class="token number">0.4948</span><span class="token plain">      </span><span class="token number">0.4898</span><span class="token plain">   </span><span class="token number">0.4923</span><span class="token plain">     </span><span class="token number">392.0000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── weighted avg                                    dog        </span><span class="token number">0.3364</span><span class="token plain">      </span><span class="token number">0.5481</span><span class="token plain">   </span><span class="token number">0.4169</span><span class="token plain">     </span><span class="token number">270.0000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   ├── precision: </span><span class="token number">0.5927</span><span class="token plain">                           down       </span><span class="token number">0.6478</span><span class="token plain">      </span><span class="token number">0.6415</span><span class="token plain">   </span><span class="token number">0.6446</span><span class="token plain">     </span><span class="token number">820.0000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   ├── recall: </span><span class="token number">0.5372</span><span class="token plain">                              eight      </span><span class="token number">0.4926</span><span class="token plain">      </span><span class="token number">0.7417</span><span class="token plain">   </span><span class="token number">0.5920</span><span class="token plain">     </span><span class="token number">542.0000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   ├── f1-score: </span><span class="token number">0.5247</span><span class="token plain">                            five       </span><span class="token number">0.7416</span><span class="token plain">      </span><span class="token number">0.5946</span><span class="token plain">   </span><span class="token number">0.6600</span><span class="token plain">     </span><span class="token number">1110.0000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   └── support: </span><span class="token number">21760.0000</span><span class="token plain">                         follow     </span><span class="token number">0.5058</span><span class="token plain">      </span><span class="token number">0.5472</span><span class="token plain">   </span><span class="token number">0.5257</span><span class="token plain">     </span><span class="token number">318.0000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── hamming_loss: </span><span class="token number">0.4628</span><span class="token plain">                            forward    </span><span class="token number">0.3097</span><span class="token plain">      </span><span class="token number">0.6076</span><span class="token plain">   </span><span class="token number">0.4103</span><span class="token plain">     </span><span class="token number">158.0000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">└── cohen_kappa_score: </span><span class="token number">0.5231</span><span class="token plain">                       four       </span><span class="token number">0.6400</span><span class="token plain">      </span><span class="token number">0.5995</span><span class="token plain">   </span><span class="token number">0.6191</span><span class="token plain">     </span><span class="token number">854.0000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                    go         </span><span class="token number">0.2736</span><span class="token plain">      </span><span class="token number">0.6145</span><span class="token plain">   </span><span class="token number">0.3787</span><span class="token plain">     </span><span class="token number">358.0000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                    happy      </span><span class="token number">0.6847</span><span class="token plain">      </span><span class="token number">0.8176</span><span class="token plain">   </span><span class="token number">0.7453</span><span class="token plain">     </span><span class="token number">340.0000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                    house      </span><span class="token number">0.7749</span><span class="token plain">      </span><span class="token number">0.2919</span><span class="token plain">   </span><span class="token number">0.4241</span><span class="token plain">     </span><span class="token number">1014.0000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                    learn      </span><span class="token number">0.3416</span><span class="token plain">      </span><span class="token number">0.5189</span><span class="token plain">   </span><span class="token number">0.4120</span><span class="token plain">     </span><span class="token number">212.0000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                    left       </span><span class="token number">0.4539</span><span class="token plain">      </span><span class="token number">0.7165</span><span class="token plain">   </span><span class="token number">0.5557</span><span class="token plain">     </span><span class="token number">522.0000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                    marvin     </span><span class="token number">0.5436</span><span class="token plain">      </span><span class="token number">0.8346</span><span class="token plain">   </span><span class="token number">0.6584</span><span class="token plain">     </span><span class="token number">254.0000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                    nine       </span><span class="token number">0.5833</span><span class="token plain">      </span><span class="token number">0.7653</span><span class="token plain">   </span><span class="token number">0.6620</span><span class="token plain">     </span><span class="token number">622.0000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                    no         </span><span class="token number">0.2568</span><span class="token plain">      </span><span class="token number">0.8814</span><span class="token plain">   </span><span class="token number">0.3977</span><span class="token plain">     </span><span class="token number">236.0000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                    off        </span><span class="token number">0.6219</span><span class="token plain">      </span><span class="token number">0.5910</span><span class="token plain">   </span><span class="token number">0.6061</span><span class="token plain">     </span><span class="token number">846.0000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                    on         </span><span class="token number">0.7146</span><span class="token plain">      </span><span class="token number">0.7093</span><span class="token plain">   </span><span class="token number">0.7119</span><span class="token plain">     </span><span class="token number">798.0000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                    one        </span><span class="token number">0.5439</span><span class="token plain">      </span><span class="token number">0.8411</span><span class="token plain">   </span><span class="token number">0.6606</span><span class="token plain">     </span><span class="token number">516.0000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                    right      </span><span class="token number">0.5354</span><span class="token plain">      </span><span class="token number">0.7186</span><span class="token plain">   </span><span class="token number">0.6136</span><span class="token plain">     </span><span class="token number">590.0000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                    seven      </span><span class="token number">0.7438</span><span class="token plain">      </span><span class="token number">0.5374</span><span class="token plain">   </span><span class="token number">0.6240</span><span class="token plain">     </span><span class="token number">1124.0000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                    sheila     </span><span class="token number">0.8396</span><span class="token plain">      </span><span class="token number">0.3321</span><span class="token plain">   </span><span class="token number">0.4759</span><span class="token plain">     </span><span class="token number">1072.0000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                    six        </span><span class="token number">0.8909</span><span class="token plain">      </span><span class="token number">0.4067</span><span class="token plain">   </span><span class="token number">0.5585</span><span class="token plain">     </span><span class="token number">1726.0000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                    stop       </span><span class="token number">0.7421</span><span class="token plain">      </span><span class="token number">0.5360</span><span class="token plain">   </span><span class="token number">0.6224</span><span class="token plain">     </span><span class="token number">1138.0000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                    three      </span><span class="token number">0.3827</span><span class="token plain">      </span><span class="token number">0.4282</span><span class="token plain">   </span><span class="token number">0.4042</span><span class="token plain">     </span><span class="token number">724.0000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                    tree       </span><span class="token number">0.7098</span><span class="token plain">      </span><span class="token number">0.2171</span><span class="token plain">   </span><span class="token number">0.3325</span><span class="token plain">     </span><span class="token number">1262.0000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                    two        </span><span class="token number">0.2712</span><span class="token plain">      </span><span class="token number">0.6647</span><span class="token plain">   </span><span class="token number">0.3853</span><span class="token plain">     </span><span class="token number">346.0000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                    up         </span><span class="token number">0.2635</span><span class="token plain">      </span><span class="token number">0.8889</span><span class="token plain">   </span><span class="token number">0.4065</span><span class="token plain">     </span><span class="token number">252.0000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                    visual     </span><span class="token number">0.4970</span><span class="token plain">      </span><span class="token number">0.9011</span><span class="token plain">   </span><span class="token number">0.6406</span><span class="token plain">     </span><span class="token number">182.0000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                    wow        </span><span class="token number">0.3883</span><span class="token plain">      </span><span class="token number">0.8989</span><span class="token plain">   </span><span class="token number">0.5424</span><span class="token plain">     </span><span class="token number">178.0000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                    </span><span class="token function" style="color:rgb(80, 250, 123)">yes</span><span class="token plain">        </span><span class="token number">0.6205</span><span class="token plain">      </span><span class="token number">0.7450</span><span class="token plain">   </span><span class="token number">0.6771</span><span class="token plain">     </span><span class="token number">698.0000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                    zero       </span><span class="token number">0.4983</span><span class="token plain">      </span><span class="token number">0.6986</span><span class="token plain">   </span><span class="token number">0.5817</span><span class="token plain">     </span><span class="token number">418.0000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                    ERROR      </span><span class="token number">0.0000</span><span class="token plain">      </span><span class="token number">0.0000</span><span class="token plain">   </span><span class="token number">0.0000</span><span class="token plain">     </span><span class="token number">1078.0000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">─────────────────────────────────────────────────── MULTI_CLASSIFICATION Confusion Matrix ───────────────────────────────────────────────────</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Label      TP      TN    FP     FN</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ─────────────────────────────────────    ──────────────────────────────────────────────────────────────────────────────────────────────────</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ERROR      </span><span class="token number">21418</span><span class="token plain">   </span><span class="token number">152</span><span class="token plain">   </span><span class="token number">12</span><span class="token plain">     </span><span class="token number">178</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  backward   </span><span class="token number">21198</span><span class="token plain">   </span><span class="token number">290</span><span class="token plain">   </span><span class="token number">148</span><span class="token plain">    </span><span class="token number">124</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  bed        </span><span class="token number">21196</span><span class="token plain">   </span><span class="token number">236</span><span class="token plain">   </span><span class="token number">194</span><span class="token plain">    </span><span class="token number">134</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  bird       </span><span class="token number">21172</span><span class="token plain">   </span><span class="token number">196</span><span class="token plain">   </span><span class="token number">200</span><span class="token plain">    </span><span class="token number">192</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">cat</span><span class="token plain">        </span><span class="token number">21198</span><span class="token plain">   </span><span class="token number">292</span><span class="token plain">   </span><span class="token number">122</span><span class="token plain">    </span><span class="token number">148</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  dog        </span><span class="token number">20654</span><span class="token plain">   </span><span class="token number">286</span><span class="token plain">   </span><span class="token number">294</span><span class="token plain">    </span><span class="token number">526</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  down       </span><span class="token number">20804</span><span class="token plain">   </span><span class="token number">414</span><span class="token plain">   </span><span class="token number">140</span><span class="token plain">    </span><span class="token number">402</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  eight      </span><span class="token number">20420</span><span class="token plain">   </span><span class="token number">230</span><span class="token plain">   </span><span class="token number">450</span><span class="token plain">    </span><span class="token number">660</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  five       </span><span class="token number">21272</span><span class="token plain">   </span><span class="token number">170</span><span class="token plain">   </span><span class="token number">144</span><span class="token plain">    </span><span class="token number">174</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  follow     </span><span class="token number">21388</span><span class="token plain">   </span><span class="token number">214</span><span class="token plain">   </span><span class="token number">62</span><span class="token plain">     </span><span class="token number">96</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  forward    </span><span class="token number">20618</span><span class="token plain">   </span><span class="token number">288</span><span class="token plain">   </span><span class="token number">342</span><span class="token plain">    </span><span class="token number">512</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  four       </span><span class="token number">20818</span><span class="token plain">   </span><span class="token number">584</span><span class="token plain">   </span><span class="token number">138</span><span class="token plain">    </span><span class="token number">220</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  go         </span><span class="token number">21292</span><span class="token plain">   </span><span class="token number">128</span><span class="token plain">   </span><span class="token number">62</span><span class="token plain">     </span><span class="token number">278</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  happy      </span><span class="token number">20660</span><span class="token plain">   </span><span class="token number">86</span><span class="token plain">    </span><span class="token number">718</span><span class="token plain">    </span><span class="token number">296</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  house      </span><span class="token number">21336</span><span class="token plain">   </span><span class="token number">212</span><span class="token plain">   </span><span class="token number">102</span><span class="token plain">    </span><span class="token number">110</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  learn      </span><span class="token number">20788</span><span class="token plain">   </span><span class="token number">450</span><span class="token plain">   </span><span class="token number">148</span><span class="token plain">    </span><span class="token number">374</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  left       </span><span class="token number">21328</span><span class="token plain">   </span><span class="token number">178</span><span class="token plain">   </span><span class="token number">42</span><span class="token plain">     </span><span class="token number">212</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  marvin     </span><span class="token number">20798</span><span class="token plain">   </span><span class="token number">340</span><span class="token plain">   </span><span class="token number">146</span><span class="token plain">    </span><span class="token number">476</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  nine       </span><span class="token number">20922</span><span class="token plain">   </span><span class="token number">602</span><span class="token plain">   </span><span class="token number">28</span><span class="token plain">     </span><span class="token number">208</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  no         </span><span class="token number">20610</span><span class="token plain">   </span><span class="token number">304</span><span class="token plain">   </span><span class="token number">346</span><span class="token plain">    </span><span class="token number">500</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  off        </span><span class="token number">20736</span><span class="token plain">   </span><span class="token number">226</span><span class="token plain">   </span><span class="token number">232</span><span class="token plain">    </span><span class="token number">566</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  on         </span><span class="token number">20880</span><span class="token plain">   </span><span class="token number">364</span><span class="token plain">   </span><span class="token number">82</span><span class="token plain">     </span><span class="token number">434</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  one        </span><span class="token number">20802</span><span class="token plain">   </span><span class="token number">368</span><span class="token plain">   </span><span class="token number">166</span><span class="token plain">    </span><span class="token number">424</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  right      </span><span class="token number">20428</span><span class="token plain">   </span><span class="token number">208</span><span class="token plain">   </span><span class="token number">520</span><span class="token plain">    </span><span class="token number">604</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  seven      </span><span class="token number">20620</span><span class="token plain">   </span><span class="token number">68</span><span class="token plain">    </span><span class="token number">716</span><span class="token plain">    </span><span class="token number">356</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  sheila     </span><span class="token number">19948</span><span class="token plain">   </span><span class="token number">86</span><span class="token plain">    </span><span class="token number">1024</span><span class="token plain">   </span><span class="token number">702</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  six        </span><span class="token number">20410</span><span class="token plain">   </span><span class="token number">212</span><span class="token plain">   </span><span class="token number">528</span><span class="token plain">    </span><span class="token number">610</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  stop       </span><span class="token number">20536</span><span class="token plain">   </span><span class="token number">500</span><span class="token plain">   </span><span class="token number">414</span><span class="token plain">    </span><span class="token number">310</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  three      </span><span class="token number">20386</span><span class="token plain">   </span><span class="token number">112</span><span class="token plain">   </span><span class="token number">988</span><span class="token plain">    </span><span class="token number">274</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  tree       </span><span class="token number">20796</span><span class="token plain">   </span><span class="token number">618</span><span class="token plain">   </span><span class="token number">116</span><span class="token plain">    </span><span class="token number">230</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  two        </span><span class="token number">20882</span><span class="token plain">   </span><span class="token number">626</span><span class="token plain">   </span><span class="token number">28</span><span class="token plain">     </span><span class="token number">224</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  up         </span><span class="token number">21412</span><span class="token plain">   </span><span class="token number">166</span><span class="token plain">   </span><span class="token number">18</span><span class="token plain">     </span><span class="token number">164</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  visual     </span><span class="token number">21330</span><span class="token plain">   </span><span class="token number">252</span><span class="token plain">   </span><span class="token number">18</span><span class="token plain">     </span><span class="token number">160</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  wow        </span><span class="token number">20744</span><span class="token plain">   </span><span class="token number">318</span><span class="token plain">   </span><span class="token number">178</span><span class="token plain">    </span><span class="token number">520</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">yes</span><span class="token plain">        </span><span class="token number">21048</span><span class="token plain">   </span><span class="token number">294</span><span class="token plain">   </span><span class="token number">126</span><span class="token plain">    </span><span class="token number">292</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  zero       </span><span class="token number">20682</span><span class="token plain">   </span><span class="token number">0</span><span class="token plain">     </span><span class="token number">1078</span><span class="token plain">   </span><span class="token number">0</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>💡 Docker is required to start as a demon service on the machine</p></blockquote><p>Congratulations, we have nearly finished the whole example! From now on, we can update the training method, get a new model, build a new SWMP and evaluate our model from time to time.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="evaluate-the-model-on-a-cloud-instance">Evaluate the model on a cloud instance<a class="hash-link" href="#evaluate-the-model-on-a-cloud-instance" title="Direct link to heading">​</a></h3><ul><li><strong>Log in to a cloud instance</strong></li></ul><div class="language-shell codeBlockContainer_MPoW theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-shell codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">audio_pytorch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> $ swcli instance login http://console.pre.intra.starwhale.ai --username starwhale --password abcd1234 --alias pre-k8s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">‍🍳 login http://console.pre.intra.starwhale.ai successfully</span><span class="token operator">!</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong>Copy the model we built before to the cloud instance</strong></li></ul><div class="language-shell codeBlockContainer_MPoW theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-shell codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">audio_pytorch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> $ swcli model copy m5/version/mfstoolehayd cloud://pre-k8s/project/1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">🚧 start to copy local/project/self/model/m5/version/mfstoolehayd -</span><span class="token operator">&gt;</span><span class="token plain"> http://console.pre.intra.starwhale.ai/project/1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  🎳 upload mfstoolehaydeyrvmyzdamzrmzshuma.swmp ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ </span><span class="token number">100</span><span class="token plain">% </span><span class="token number">0</span><span class="token plain">:00:07 </span><span class="token number">94.0</span><span class="token plain"> MB </span><span class="token number">10.0</span><span class="token plain"> MB/s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">👏 copy done.</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong>Copy the dataset we built before to the cloud instance</strong></li></ul><div class="language-shell codeBlockContainer_MPoW theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-shell codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">audio_pytorch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> $ swcli dataset copy speechcommands/version/gmzgczrqmezd cloud://pre-k8s/project/1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">🚧 start to copy local/project/self/dataset/speechcommands/version/gmzgczrqmezd -</span><span class="token operator">&gt;</span><span class="token plain"> http://console.pre.intra.starwhale.ai/project/1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ⬆ _manifest.yaml         ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ </span><span class="token number">100</span><span class="token plain">% </span><span class="token number">0</span><span class="token plain">:00:00 </span><span class="token number">4.3</span><span class="token plain"> kB  ?</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ⬆ data_ubyte_0.swds_bin  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ </span><span class="token number">100</span><span class="token plain">% </span><span class="token number">0</span><span class="token plain">:00:05 </span><span class="token number">72.3</span><span class="token plain"> MB </span><span class="token number">9.6</span><span class="token plain"> MB/s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ⬆ data_ubyte_1.swds_bin  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ </span><span class="token number">100</span><span class="token plain">% </span><span class="token number">0</span><span class="token plain">:00:13 </span><span class="token number">72.8</span><span class="token plain"> MB </span><span class="token number">9.7</span><span class="token plain"> MB/s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ⬆ data_ubyte_2.swds_bin  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ </span><span class="token number">100</span><span class="token plain">% </span><span class="token number">0</span><span class="token plain">:00:21 </span><span class="token number">72.6</span><span class="token plain"> MB </span><span class="token number">9.7</span><span class="token plain"> MB/s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ⬆ data_ubyte_3.swds_bin  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ </span><span class="token number">100</span><span class="token plain">% </span><span class="token number">0</span><span class="token plain">:00:29 </span><span class="token number">72.6</span><span class="token plain"> MB </span><span class="token number">9.7</span><span class="token plain"> MB/s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ⬆ data_ubyte_4.swds_bin  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ </span><span class="token number">100</span><span class="token plain">% </span><span class="token number">0</span><span class="token plain">:00:37 </span><span class="token number">73.0</span><span class="token plain"> MB </span><span class="token number">9.8</span><span class="token plain"> MB/s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ⬆ data_ubyte_5.swds_bin  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ </span><span class="token number">100</span><span class="token plain">% </span><span class="token number">0</span><span class="token plain">:00:45 </span><span class="token number">72.8</span><span class="token plain"> MB </span><span class="token number">9.4</span><span class="token plain"> MB/s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ⬆ data_ubyte_6.swds_bin  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ </span><span class="token number">100</span><span class="token plain">% </span><span class="token number">0</span><span class="token plain">:00:53 </span><span class="token number">72.8</span><span class="token plain"> MB </span><span class="token number">9.6</span><span class="token plain"> MB/s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ⬆ data_ubyte_7.swds_bin  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ </span><span class="token number">100</span><span class="token plain">% </span><span class="token number">0</span><span class="token plain">:01:01 </span><span class="token number">72.7</span><span class="token plain"> MB </span><span class="token number">9.7</span><span class="token plain"> MB/s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ⬆ data_ubyte_8.swds_bin  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ </span><span class="token number">100</span><span class="token plain">% </span><span class="token number">0</span><span class="token plain">:01:09 </span><span class="token number">72.5</span><span class="token plain"> MB </span><span class="token number">9.7</span><span class="token plain"> MB/s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ⬆ data_ubyte_9.swds_bin  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ </span><span class="token number">100</span><span class="token plain">% </span><span class="token number">0</span><span class="token plain">:01:13 </span><span class="token number">32.5</span><span class="token plain"> MB </span><span class="token number">6.9</span><span class="token plain"> MB/s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ⬆ index.jsonl            ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ </span><span class="token number">100</span><span class="token plain">% </span><span class="token number">0</span><span class="token plain">:01:15 </span><span class="token number">15.2</span><span class="token plain"> kB ?</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ⬆ label_ubyte_0.swds_bin ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ </span><span class="token number">100</span><span class="token plain">% </span><span class="token number">0</span><span class="token plain">:01:15 </span><span class="token number">36.6</span><span class="token plain"> kB ?</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ⬆ label_ubyte_1.swds_bin ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ </span><span class="token number">100</span><span class="token plain">% </span><span class="token number">0</span><span class="token plain">:01:15 </span><span class="token number">36.6</span><span class="token plain"> kB ?</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ⬆ label_ubyte_2.swds_bin ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ </span><span class="token number">100</span><span class="token plain">% </span><span class="token number">0</span><span class="token plain">:01:15 </span><span class="token number">36.6</span><span class="token plain"> kB ?</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ⬆ label_ubyte_3.swds_bin ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ </span><span class="token number">100</span><span class="token plain">% </span><span class="token number">0</span><span class="token plain">:01:15 </span><span class="token number">36.6</span><span class="token plain"> kB ?</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ⬆ label_ubyte_4.swds_bin ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ </span><span class="token number">100</span><span class="token plain">% </span><span class="token number">0</span><span class="token plain">:01:15 </span><span class="token number">36.6</span><span class="token plain"> kB ?</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ⬆ label_ubyte_5.swds_bin ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ </span><span class="token number">100</span><span class="token plain">% </span><span class="token number">0</span><span class="token plain">:01:15 </span><span class="token number">36.6</span><span class="token plain"> kB ?</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ⬆ label_ubyte_6.swds_bin ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ </span><span class="token number">100</span><span class="token plain">% </span><span class="token number">0</span><span class="token plain">:01:15 </span><span class="token number">36.6</span><span class="token plain"> kB ?</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ⬆ label_ubyte_7.swds_bin ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ </span><span class="token number">100</span><span class="token plain">% </span><span class="token number">0</span><span class="token plain">:01:15 </span><span class="token number">36.6</span><span class="token plain"> kB ?</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ⬆ label_ubyte_8.swds_bin ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ </span><span class="token number">100</span><span class="token plain">% </span><span class="token number">0</span><span class="token plain">:01:15 </span><span class="token number">36.6</span><span class="token plain"> kB ?</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ⬆ label_ubyte_9.swds_bin ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ </span><span class="token number">100</span><span class="token plain">% </span><span class="token number">0</span><span class="token plain">:01:15 </span><span class="token number">16.3</span><span class="token plain"> kB ?</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ⬆ archive.swds_meta      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ </span><span class="token number">100</span><span class="token plain">% </span><span class="token number">0</span><span class="token plain">:01:23 </span><span class="token number">93.9</span><span class="token plain"> MB </span><span class="token number">10.0</span><span class="token plain"> MB/s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">👏 copy </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">done</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong>Copy the runtime we built before to the cloud instance</strong></li></ul><div class="language-shell codeBlockContainer_MPoW theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-shell codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">audio_pytorch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> $ swcli runtime copy audio_pytorch/version/ga2wkmbwmizw cloud://pre-k8s/project/1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">🚧 start to copy local/project/self/runtime/audio_pytorch/version/ga2wkmbwmizw -</span><span class="token operator">&gt;</span><span class="token plain"> http://console.pre.intra.starwhale.ai/project/1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  🎳 upload ga2wkmbwmizwkn3bmuytsmjunv3dc3q.swrt ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ </span><span class="token number">100</span><span class="token plain">% </span><span class="token number">0</span><span class="token plain">:00:00 </span><span class="token number">20.5</span><span class="token plain"> kB ?</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">👏 copy done.</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong>Go to the console and create one job</strong></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/star-whale/starwhale/tree/main/docs/docs/tutorials/speech.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/tutorials/pfp"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Object Detection &amp; segmentation on PeenFudanPed dataset</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/tutorials/nmt"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">NMT for french and engish</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#create-a-runtime" class="table-of-contents__link toc-highlight">Create a Runtime</a></li><li><a href="#train-the-model" class="table-of-contents__link toc-highlight">Train the model</a></li><li><a href="#slice-the-test-dataset-using-the-starwhale-protocol" class="table-of-contents__link toc-highlight">Slice the test dataset using the Starwhale protocol</a></li><li><a href="#implement-the-inference-method-and-evaluation-metrics-computing-method" class="table-of-contents__link toc-highlight">Implement the inference method and evaluation metrics computing method</a><ul><li><a href="#implement-ppl" class="table-of-contents__link toc-highlight">Implement ppl</a></li><li><a href="#implement-cmp" class="table-of-contents__link toc-highlight">Implement cmp</a></li></ul></li><li><a href="#build-runtime-model-and-dataset" class="table-of-contents__link toc-highlight">Build Runtime, Model, and Dataset</a><ul><li><a href="#build-runtime" class="table-of-contents__link toc-highlight">Build Runtime</a></li><li><a href="#build-dataset" class="table-of-contents__link toc-highlight">Build Dataset</a></li><li><a href="#build-model" class="table-of-contents__link toc-highlight">Build Model</a></li></ul></li><li><a href="#run-the-evaluation-job-and-see-the-metrics" class="table-of-contents__link toc-highlight">Run the evaluation job and see the metrics</a><ul><li><a href="#evaluate-the-model-on-the-local-standalone-instance" class="table-of-contents__link toc-highlight">Evaluate the model on the local standalone instance</a></li><li><a href="#evaluate-the-model-on-a-cloud-instance" class="table-of-contents__link toc-highlight">Evaluate the model on a cloud instance</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="logo margin-bottom--sm"><div class="social"></div></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Starwhale, Inc. All rights reserved. </div></div></footer></div>
<script src="/assets/js/runtime~main.ce36098f.js"></script>
<script src="/assets/js/main.c6840791.js"></script>
</body>
</html>